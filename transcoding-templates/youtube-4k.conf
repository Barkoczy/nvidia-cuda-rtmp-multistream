# YouTube 4K Transcoding Template
video_transcode_options {
    # Basic settings
    width 3840;
    height 2160;
    framerate 60;
    
    # NVENC specific settings
    nvenc true;
    nvenc_profile high;
    nvenc_preset p7;            # Highest quality preset
    nvenc_rc cbr;              # Constant bitrate mode
    nvenc_surfaces 64;         # Maximum surfaces for better quality
    nvenc_async 1;            # Asynchronous encoding
    nvenc_b_ref_mode 2;       # Use B-frames as references
    nvenc_max_b_frames 4;     # Maximum B-frames
    
    # Fallback x264 settings if no NVIDIA GPU
    x264_profile high;
    x264_preset medium;       # Balance between quality and CPU usage
    x264opts "keyint=120:min-keyint=120:no-scenecut:rc-lookahead=60:ref=6:bframes=4:b-adapt=2:direct=auto:me=umh:subme=10:trellis=2:deblock=-1,-1:psy-rd=1.0,0.15:nal-hrd=cbr";
    
    # Audio settings
    audio_codec aac;
    audio_bitrate 320k;
    audio_channels 2;
    audio_sample_rate 48000;
}